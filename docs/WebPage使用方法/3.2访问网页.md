æœ¬èŠ‚ä»‹ç»å¦‚æœè®¿é—®ç½‘é¡µã€‚

# âœ”ï¸ d æ¨¡å¼

d æ¨¡å¼ä¸‹ä½¿ç”¨`get()`æ–¹æ³•è®¿é—®ç½‘é¡µã€‚

## ğŸ“ `get()`æ–¹æ³•

è¯¥æ–¹æ³•ç”¨äºè·³è½¬åˆ°ä¸€ä¸ªç½‘å€ã€‚  
å½“è¿æ¥å¤±è´¥æ—¶ï¼Œç¨‹åºé»˜è®¤é‡è¯• 3 æ¬¡ï¼Œæ¯æ¬¡é—´éš” 2 ç§’ï¼Œå¯ä»¥é€šè¿‡å‚æ•°è®¾ç½®é‡è¯•æ¬¡æ•°å’Œé—´éš”ã€‚   
d æ¨¡å¼ä¸‹æ ¹æ®æµè§ˆå™¨çš„çŠ¶æ€ï¼Œè¿˜å¯ä»¥é€šè¿‡é‡å†™`check_page()`æ–¹æ³•å®ç°è‡ªå®šä¹‰æ£€æŸ¥æ–¹å¼ã€‚

å‚æ•°ï¼š

- urlï¼šç›®æ ‡ url
- show_errmsgï¼šæ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸ã€‚é»˜è®¤ä¸æŠ›å‡ºï¼Œè¿æ¥é”™è¯¯ä¼šè¿”å›`None`
- retryï¼šé‡è¯•æ¬¡æ•°ï¼Œä¸é¡µé¢å¯¹è±¡çš„è®¾ç½®ä¸€è‡´ï¼Œé»˜è®¤ 3 æ¬¡
- intervalï¼šé‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸é¡µé¢å¯¹è±¡çš„è®¾ç½®ä¸€è‡´ï¼Œé»˜è®¤ 2 ç§’
- timeoutï¼šè¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

è¿”å›ï¼š`bool`ç±»å‹ï¼Œè¡¨ç¤ºæ˜¯å¦è¿æ¥æˆåŠŸ

```python
from DrissionPage import WebPage

page = WebPage()
page.get('https://www.baidu.com')
```

## ğŸ“ è®¾ç½®è¶…æ—¶æ—¶é—´å’Œé‡è¯•å‚æ•°

ç½‘ç»œä¸ç¨³å®šçš„æ—¶å€™è®¿é—®é¡µé¢ä¸ä¸€å®šæˆåŠŸï¼Œ`get()`æ–¹æ³•å†…ç½®äº†è¶…æ—¶å’Œé‡è¯•åŠŸèƒ½ã€‚é€šè¿‡`retry`ã€`interval`ã€`timeout`ä¸‰ä¸ªå‚æ•°è¿›è¡Œè®¾ç½®ã€‚  
å…¶ä¸­ï¼Œå¦‚ä¸æŒ‡å®š`timeout`å‚æ•°ï¼Œè¯¥å‚æ•°ä¼šä½¿ç”¨`WebPage`çš„`timeouts`å±æ€§çš„`page_load`å‚æ•°ä¸­çš„å€¼ã€‚

```python
from DrissionPage import WebPage

page = WebPage()
page.get('https://www.163.com', retry=1, interval=1, timeout=1.5)
```

## ğŸ“ è®¾ç½®åŠ è½½ç­–ç•¥

é€šè¿‡è®¾ç½®`WebPage`å¯¹è±¡çš„`page_load_strategy`å±æ€§ï¼Œå¯è®¾ç½®é¡µé¢åœæ­¢åŠ è½½çš„æ—¶æœºã€‚é¡µé¢åŠ è½½æ—¶ï¼Œåœ¨åˆ°è¾¾è¶…æ—¶æ—¶é—´ï¼Œæˆ–è¾¾åˆ°è®¾å®šçš„çŠ¶æ€ï¼Œå°±ä¼šåœæ­¢ï¼Œå¯æœ‰æ•ˆèŠ‚çœé‡‡é›†æ—¶é—´ã€‚æœ‰ä»¥ä¸‹ä¸‰ç§æ¨¡å¼ï¼š

- `'normal'`ï¼šå¸¸è§„æ¨¡å¼ï¼Œä¼šç­‰å¾…é¡µé¢åŠ è½½å®Œæ¯•ã€‚

- `'eager'`ï¼šåŠ è½½å®Œ DOM å³åœæ­¢åŠ è½½ã€‚

- `'none'`ï¼šå®Œæˆè¿æ¥å³åœæ­¢åŠ è½½ã€‚

é»˜è®¤è®¾ç½®ä¸º`'normal'`ã€‚

```python
from DrissionPage import WebPage

page = WebPage()
page.set_page_load_strategy()
```

# âœ”ï¸ s æ¨¡å¼

s æ¨¡å¼åŸºäº requestsï¼Œå› æ­¤å¯ä½¿ç”¨ requests å†…ç½®çš„æ‰€æœ‰è¯·æ±‚æ–¹å¼ï¼ŒåŒ…æ‹¬`get()`ã€`post()`ã€`head()`ã€`options()`ã€`put()`ã€`patch()`ã€`delete()`
ã€‚ä¸è¿‡æœ¬åº“ç›®å‰åªå¯¹`get()`å’Œ`post()`åšäº†å°è£…å’Œä¼˜åŒ–ï¼Œå…¶ä½™æ–¹å¼å¯é€šè¿‡è°ƒç”¨`WebPage`å†…ç½®çš„`Session`å¯¹è±¡ä½¿ç”¨ã€‚

## ğŸ“ `get()`æ–¹æ³•

`get()`æ–¹æ³•ä½¿ç”¨è¯­æ³•ä¸ requests çš„`get()`æ–¹æ³•ä¸€è‡´ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†é‡è¯•è®¾ç½®å‚æ•°ã€‚

å‚æ•°ï¼š

- urlï¼šç›®æ ‡ url
- show_errmsgï¼šæ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸ï¼Œé»˜è®¤ä¸æŠ›å‡ºï¼Œè¿æ¥é”™è¯¯ä¼šè¿”å› None
- retryï¼šé‡è¯•æ¬¡æ•°ï¼Œä¸é¡µé¢å¯¹è±¡çš„è®¾ç½®ä¸€è‡´ï¼Œé»˜è®¤ 3 æ¬¡
- intervalï¼šé‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸é¡µé¢å¯¹è±¡çš„è®¾ç½®ä¸€è‡´ï¼Œé»˜è®¤ 2 ç§’
- timeoutï¼šè¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- **kwargsï¼šè¿æ¥å‚æ•°ï¼Œå…·ä½“è§ requestsç”¨æ³•

è¿”å›ï¼š`bool`ç±»å‹ï¼Œè¡¨ç¤ºæ˜¯å¦è¿æ¥æˆåŠŸï¼Œæ ¹æ®`Response`å¯¹è±¡çš„`status_code`å‚æ•°å†³å®š

s æ¨¡å¼çš„`**kwargs`å‚æ•°ä¸ requests ä¸­è¯¥å‚æ•°ä½¿ç”¨æ–¹æ³•ä¸€è‡´ï¼Œä½†æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå¦‚æœè¯¥å‚æ•°ä¸­è®¾ç½®äº†æŸä¸€é¡¹ï¼ˆå¦‚`headers`ï¼‰ï¼Œè¯¥é¡¹ä¸­çš„æ¯ä¸ªé¡¹ä¼šè¦†ç›–ä»é…ç½®ä¸­è¯»å–çš„åŒåé¡¹ï¼Œè€Œä¸ä¼šæ•´ä¸ªè¦†ç›–ã€‚  
å°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³ç»§ç»­ä½¿ç”¨é…ç½®ä¸­çš„`headers`ä¿¡æ¯ï¼Œè€Œåªæƒ³ä¿®æ”¹å…¶ä¸­ä¸€é¡¹ï¼Œåªéœ€è¦ä¼ å…¥è¯¥é¡¹çš„å€¼å³å¯ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–ä»£ç é€»è¾‘ã€‚  
ä¸ requests ä¸ä¸€æ ·ï¼Œ`get()`æ–¹æ³•ä¸è¿”å›`Response`å¯¹è±¡ä»¥è·å–ç»“æœï¼Œå¤„ç†è¿”å›ç»“æœçš„æ–¹å¼è¯¦è§åé¢ç« èŠ‚ã€‚

å®ç”¨åŠŸèƒ½ï¼š

- ç¨‹åºä¼šæ ¹æ®è¦è®¿é—®çš„ç½‘å€è‡ªåŠ¨åœ¨`headers`ä¸­åŠ å…¥`Host`å’Œ`Referer`é¡¹
- ç¨‹åºä¼šè‡ªåŠ¨ä»è¿”å›å†…å®¹ä¸­ç¡®å®šç¼–ç ï¼Œä¸€èˆ¬æƒ…å†µæ— é¡»æ‰‹åŠ¨è®¾ç½®

```python
from DrissionPage import WebPage

page = WebPage('s')

url = 'https://www.baidu.com'
headers = {'referer': 'gitee.com'}
cookies = {'name': 'value'}
proxies = {'http': '127.0.0.1:1080', 'https': '127.0.0.1:1080'}
page.get(url, headers=headers, cookies=cookies, proxies=proxies)
```

## ğŸ“ `post()`æ–¹æ³•

æ­¤æ–¹æ³•æ˜¯ç”¨ post æ–¹å¼è¯·æ±‚é¡µé¢ã€‚ç”¨æ³•ä¸`get()`ä¸€è‡´ã€‚è°ƒç”¨æ—¶ï¼Œ`WebPage`å¯¹è±¡ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° s æ¨¡å¼ã€‚

å‚æ•°ï¼š

- urlï¼šç›®æ ‡ url
- dataï¼šæäº¤çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯`dict`æˆ–`str`ç±»å‹
- jsonï¼šæäº¤çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯`dict`æˆ–`str`ç±»å‹
- show_errmsgï¼šæ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸ï¼Œé»˜è®¤ä¸æŠ›å‡ºï¼Œè¿æ¥é”™è¯¯ä¼šè¿”å› None
- retryï¼šé‡è¯•æ¬¡æ•°ï¼Œä¸é¡µé¢å¯¹è±¡çš„è®¾ç½®ä¸€è‡´ï¼Œé»˜è®¤ 3 æ¬¡
- intervalï¼šé‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸é¡µé¢å¯¹è±¡çš„è®¾ç½®ä¸€è‡´ï¼Œé»˜è®¤ 2 ç§’
- **kwargsï¼šè¿æ¥å‚æ•°ï¼Œs æ¨¡å¼ä¸“ç”¨

```python
from DrissionPage import WebPage

page = WebPage('s')
data = {'username': 'xxxxx', 'pwd': 'xxxxx'}

page.post('http://example.com', data=data)
# æˆ–
page.post('http://example.com', json=data)
```

`data`å‚æ•°å’Œ`json`å‚æ•°éƒ½å¯æ¥æ”¶`str`å’Œ`dict`æ ¼å¼æ•°æ®ï¼Œå³æœ‰ä»¥ä¸‹ 4 ç§ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼š

```python
# å‘ data å‚æ•°ä¼ å…¥å­—ç¬¦ä¸²
page.post(url, data='abc=123')

# å‘ data å‚æ•°ä¼ å…¥å­—å…¸
page.post(url, data={'abc': '123'})

# å‘ json å‚æ•°ä¼ å…¥å­—ç¬¦ä¸²
page.post(url, json='abc=123')

# å‘ json å‚æ•°ä¼ å…¥å­—å…¸
page.post(url, json={'abc': '123'})
```

å…·ä½“ä½¿ç”¨å“ªç§ï¼ŒæŒ‰æœåŠ¡å™¨è¦æ±‚è€Œå®šã€‚

## ğŸ“ å…¶å®ƒè¯·æ±‚æ–¹å¼

æœ¬åº“åªé’ˆå¯¹å¸¸ç”¨çš„ get å’Œ post æ–¹å¼ä½œäº†ä¼˜åŒ–ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡æå–é¡µé¢å¯¹è±¡å†…çš„`Session`å¯¹è±¡ä»¥åŸç”Ÿ requests ä»£ç æ–¹å¼æ‰§è¡Œå…¶å®ƒè¯·æ±‚æ–¹å¼ã€‚å½“ç„¶ï¼Œå®ƒä»¬å·¥ä½œåœ¨ s æ¨¡å¼ã€‚

```python
from DrissionPage import WebPage

page = WebPage('s')
# è·å–å†…ç½®çš„ Session å¯¹è±¡
session = page.session
# ä»¥ head æ–¹å¼å‘é€è¯·æ±‚
response = session.head('https://www.baidu.com')
print(response.headers)
```

è¾“å‡ºï¼š

```shell
{'Accept-Ranges': 'bytes', 'Cache-Control': 'private, no-cache, no-store, proxy-revalidate, no-transform', 'Connection': 'keep-alive', 'Content-Length': '277', 'Content-Type': 'text/html', 'Date': 'Tue, 04 Jan 2022 06:49:18 GMT', 'Etag': '"575e1f72-115"', 'Last-Modified': 'Mon, 13 Jun 2016 02:50:26 GMT', 'Pragma': 'no-cache', 'Server': 'bfe/1.0.8.18'}
```
